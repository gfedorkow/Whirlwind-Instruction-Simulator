                           ; LAS 1/27/25. This file produced using wwlzparser from
                           ; L-and-Z-Transcript-With-Repairs-Tab.txt. See
                           ; ./runtest.sh. L-and-Z-Transcript-With-Repairs-Tab.txt in turn is a
                           ; set of hand-corrections to L-and-Z-Transcript-Tab.txt. These files
                           ; are now both read-only. las-l-and-z.ww will henceforth contain all changes.

                           ; Below, lines beginning with "; |" are comments from the original
                           ; text (with braceketed moden notes from the transcription Similarly,
                           ; comments in the first comment field following an instruction are
                           ; from the original text. Subsequent comment fields are modern notes.

                           ; | [Transcribed by Larry Stabile, 10/13/24]
                           ; | [Transcription notes and questions in square brackets]
                           ; | [Meaning of double-bars?]
                           ; | [Did not transcribe "light-colored" text]
                           ; |
                           ; | Instrumentation Laboratory
                           ; | Massachusetts Institute of Technology
                           ; | Cambridge, Mass.
                           ; | Prepared by: J.H Laning Jr.
                           ; | Date: 3/53
                           ; | (Tape T-2134-m8 plus correction tape P-2134-10)
                           ; |
                           ; | Sheet 1/20
                           ; | a1 (Read-in)
                           ; |
                           .jumpto 0o10
                           .org 0o10
@0010:074400               sp a1
                           .org 0o40
@0040:000000    comp_code: .words 0o400 - comp_code, 0; @@WrittenBy 10a8 JumpedToBy a0500
@0041:000000
@0042:000000
@0043:000000
@0044:000000
@0045:000000
@0046:000000
@0047:000000
@0050:000000
@0051:000000
@0052:000000
@0053:000000
@0054:000000
@0055:000000
@0056:000000
@0057:000000
@0060:000000
@0061:000000
@0062:000000
@0063:000000
@0064:000000
@0065:000000
@0066:000000
@0067:000000
@0070:000000
@0071:000000
@0072:000000
@0073:000000
@0074:000000
@0075:000000
@0076:000000
@0077:000000
@0100:000000
@0101:000000
@0102:000000
@0103:000000
@0104:000000
@0105:000000
@0106:000000
@0107:000000
@0110:000000
@0111:000000
@0112:000000
@0113:000000
@0114:000000
@0115:000000
@0116:000000
@0117:000000
@0120:000000
@0121:000000
@0122:000000
@0123:000000
@0124:000000
@0125:000000
@0126:000000
@0127:000000
@0130:000000
@0131:000000
@0132:000000
@0133:000000
@0134:000000
@0135:000000
@0136:000000
@0137:000000
@0140:000000
@0141:000000
@0142:000000
@0143:000000
@0144:000000
@0145:000000
@0146:000000
@0147:000000
@0150:000000
@0151:000000
@0152:000000
@0153:000000
@0154:000000
@0155:000000
@0156:000000
@0157:000000
@0160:000000
@0161:000000
@0162:000000
@0163:000000
@0164:000000
@0165:000000
@0166:000000
@0167:000000
@0170:000000
@0171:000000
@0172:000000
@0173:000000
@0174:000000
@0175:000000
@0176:000000
@0177:000000
@0200:000000
@0201:000000
@0202:000000
@0203:000000
@0204:000000
@0205:000000
@0206:000000
@0207:000000
@0210:000000
@0211:000000
@0212:000000
@0213:000000
@0214:000000
@0215:000000
@0216:000000
@0217:000000
@0220:000000
@0221:000000
@0222:000000
@0223:000000
@0224:000000
@0225:000000
@0226:000000
@0227:000000
@0230:000000
@0231:000000
@0232:000000
@0233:000000
@0234:000000
@0235:000000
@0236:000000
@0237:000000
@0240:000000
@0241:000000
@0242:000000
@0243:000000
@0244:000000
@0245:000000
@0246:000000
@0247:000000
@0250:000000
@0251:000000
@0252:000000
@0253:000000
@0254:000000
@0255:000000
@0256:000000
@0257:000000
@0260:000000
@0261:000000
@0262:000000
@0263:000000
@0264:000000
@0265:000000
@0266:000000
@0267:000000
@0270:000000
@0271:000000
@0272:000000
@0273:000000
@0274:000000
@0275:000000
@0276:000000
@0277:000000
@0300:000000
@0301:000000
@0302:000000
@0303:000000
@0304:000000
@0305:000000
@0306:000000
@0307:000000
@0310:000000
@0311:000000
@0312:000000
@0313:000000
@0314:000000
@0315:000000
@0316:000000
@0317:000000
@0320:000000
@0321:000000
@0322:000000
@0323:000000
@0324:000000
@0325:000000
@0326:000000
@0327:000000
@0330:000000
@0331:000000
@0332:000000
@0333:000000
@0334:000000
@0335:000000
@0336:000000
@0337:000000
@0340:000000
@0341:000000
@0342:000000
@0343:000000
@0344:000000
@0345:000000
@0346:000000
@0347:000000
@0350:000000
@0351:000000
@0352:000000
@0353:000000
@0354:000000
@0355:000000
@0356:000000
@0357:000000
@0360:000000
@0361:000000
@0362:000000
@0363:000000
@0364:000000
@0365:000000
@0366:000000
@0367:000000
@0370:000000
@0371:000000
@0372:000000
@0373:000000
@0374:000000
@0375:000000
@0376:000000
@0377:000000
                           .org 0o400
                       a1:
@0400:000200               si 128                   ; ; Auto-Annotate I/O: Mechanical Paper Tape Reader@@JumpedToBy a0010
@0401:130444          1a1: ao 36a1                  ; @@JumpedToBy a0420
@0402:014402          2a1: rd 2a1                   ; @@JumpedToBy 37a1 a0464 a0511 a0544 a0546 a0552 a0562 a0600 a0603 a0611 a0612 a0643 a0644 a0646 a0652 a0662 a0700 4a9 a1024 a1066 a1104 a1132 a1201 a1255
                           ; ; 		  .print "xxxxx 1 rd %ao"
@0403:110501          3a1: ad a3                    ; (l.c. or u.c.) ; [LAS was ad (a3/1a3)] @@WrittenBy 1a4
@0404:044410               td 8a1
@0405:044651               td 40a4
@0406:044416               td 14a1
@0407:044426               td 22a1
@0410:100000          8a1: ca 0                     ; @@WrittenBy a0404
@0411:114505               su 4a3                   ; -| Is symbol
@0412:070414         10a1: cp 12a1                  ; -| a number?
@0413:074647         11a1: sp 38a4                  ; ; [LAS was sp (38a4/58a4)] @@WrittenBy a0415 a0674
@0414:100540         12a1: ca 31a3                  ; 31a3 is the normal mode ; [LAS was ca (33a3/31a3)] @@WrittenBy a1103 a1110 JumpedToBy 10a1
@0415:044413               td 11a1
@0416:100000         14a1: ca 0                     ; @@WrittenBy a0406
@0417:114000               su 0                     ; (Is symbol a period?)
@0420:070401               cp 1a1
@0421:114567               su 54a3                  ; -| l.c. no. or exponent?
@0422:070656               cp 45a4                  ; -|
@0423:100554               ca 43a3                  ; -| set to interpret
@0424:044675               td 60a4                  ;  | digit as an
@0425:104677               cs 62a4                  ; -| exponent
@0426:110000         22a1: ad 0                     ; @@WrittenBy a0407 JumpedToBy a0661
@0427:070450         23a1: cp 40a1                  ; --> if digit is zero ; [LAS hand-written note in listing crossed out 39r and put 40r, which makes more sense]
@0430:164564               sf 51a3                  ; -|
@0431:040453         25a1: ts 43a1                  ;  | Form [?] (24,6) version @@ReadBy a0436
@0432:100614               ca 11a4                  ;  | of digit as an
@0433:114564               su 51a3                  ;  | integer in (43r, 44r
@0434:154011               slr 9                    ;  |
@0435:040454               ts 44a1                  ; -|
                           ; ;		  .print "digit read-in %fl", 43a1
@0436:100431               ca 25a1
@0437:044442               td 34a1
                           ; | Sheet 2/20
                           ; | a1

@0440:075442         32a1: sp ax                    ; (programmed arithmetic @@JumpedToBy a0452
@0441:140762               mr 4a7                   ; (i.e., by 10) ; [LAS was "mr 497" -- transcription error]
@0442:110000         34a1: ad 0                     ; @@WrittenBy a0437 a0451
@0443:075442               sp ax
@0444:130445         36a1: ao 37a1                  ; (reset to 38r) @@WrittenBy 1a1 a0744 ReadBy 1a1
@0445:074402         37a1: sp 2a1                   ; @@WrittenBy 36a1 ReadBy 36a1
@0446:000000         38a1: .word 0                  ; (counter for digits before decimal pt ; [LAS eliminated parens for opcode p or just data in this and following sections] @@WrittenBy 13a6
@0447:000000         39a1: .word 0                  ; (  "      "    "    after     "    ") @@WrittenBy a0702 2a5 a0742 ReadBy a0701 2a5
@0450:100736         40a1: ca 10a6                  ; @@JumpedToBy 23a1
@0451:044442               td 34a1
@0452:074440               sp 32a1
@0453:000000         43a1: .word 0                  ; -| Temporary storage for @@WrittenBy 25a1
@0454:000000         44a1: .word 0                  ; -| integer during read-in @@WrittenBy a0435
                           ; |
                           ; | Sheet 3/20
                           ; | a2 (PRINT)
                           ; |
                       a2:
@0455:075356               sp a16                   ; ; [LAS section offset was 0r] @@JumpedToBy 44a4
@0456:075105               sp 28a10
@0457:101371          2a2: ca 11a16                 ; -| store "sp to print @@JumpedToBy 12a16
@0460:074775               sp 9a8                   ; -| control"
@0461:014461          4a2: rd 4a2                   ; -| read in @@JumpedToBy a0463
                           ; ;		  .print "xxxxx 2 rd %ao"
@0462:130472               ao 13a2                  ;  | "RINT"
@0463:070461               cp 4a2                   ; -|
@0464:074402               sp 2a1
@0465:104520          8a2: cs 15a3                  ; -| reset counter ; [LAS was "ca 15a3" -- transcription error] @@JumpedToBy 12a2
@0466:040472               ts 13a2                  ; -|
@0467:075356               sp a16
@0470:075100               sp 23a10
@0471:074465         12a2: sp 8a2                   ; ; [LAS was (sp 8r/p 0)] @@WrittenBy a1367 ReadBy a1365 a1367
@0472:177774         13a2: .word -3                 ; (counter) @@WrittenBy a0462 a0466 ReadBy a0462
@0473:130532         14a2: ao 25a3                  ; -| part of SP routine @@JumpedToBy 53a10
@0474:074747               sp 19a6                  ;  |
@0475:111141               ad 56a10                 ;  |
@0476:074734               sp 8a6                   ; -|
@0477:075442         18a2: sp ax                    ; -| START @@JumpedToBy a1127
@0500:074040               sp comp_code             ; -|	   ; [LAS was sp 32] [LAS was sp a1, changed to go to start of compiled code]
                           ; |
                           ; | Sheet 4/20
                           ; | a3 (Lower case symbols)
                           ; |
                       a3:
@0501:000501               .word a3                 ; @@ReadBy 3a1 0a4 9a15
@0502:000601          1a3: .word a4
@0503:074663               sp 50a4                  ; e
@0504:000011               .word 9                  ; 8
@0505:074000          4a3: sp 0                     ; @@ReadBy a0411 a0650 a1116 a1244
@0506:000000               .word 0                  ; | ; [LAS was blank][Hard to read but looking up flex code it's vertical-bar]
@0507:074663               sp 50a4                  ; a
@0510:000004               .word 4                  ; 3
@0511:074402               sp 2a1                   ; space
@0512:075063               sp 10a10                 ; =
@0513:074663               sp 50a4                  ; s
@0514:000005               .word 5                  ; 4
@0515:074663               sp 50a4                  ; i
@0516:074665               sp 52a4                  ; +
@0517:074663               sp 50a4                  ; u
@0520:000003         15a3: .word 3                  ; 2 @@ReadBy 8a2
@0521:000000               .word 0                  ; shift ribbon ; [LAS was blank]
@0522:000000         17a3: .word 0                  ; . [period] ; [LAS was "(p 0/sp 8a2)"] @@WrittenBy a1366 ReadBy a1366
@0523:074663               sp 50a4                  ; d
@0524:000006               .word 6                  ; 5
@0525:074663               sp 50a4                  ; r ; [LAS was .word 50a4. Transcription error.]
@0526:000002         21a3: .word 2                  ; 1 @@ReadBy a0766
@0527:074663               sp 50a4                  ; j
@0530:000010               .word 8                  ; 7
@0531:074663               sp 50a4                  ; n
@0532:075067         25a3: sp 14a10                 ; , @@WrittenBy 14a2 48a10 a1360 ReadBy 14a2 a1360
@0533:074663               sp 50a4                  ; f
@0534:000007               .word 7                  ; 6
@0535:074663               sp 50a4                  ; c
@0536:074670               sp 55a4                  ; -
@0537:074663               sp 50a4                  ; k
@0540:000673         31a3: .word 58a4               ; @@ReadBy 12a1
@0541:074663               sp 50a4                  ; t
@0542:000647         33a3: .word 38a4               ; @@ReadBy 58a4
                           ; | Sheet 5/20
                           ; | a3 (continued)
@0543:074663               sp 50a4                  ; z
@0544:074402               sp 2a1                   ; back space
@0545:074663               sp 50a4                  ; l
@0546:074402               sp 2a1                   ; tabulate
@0547:074663               sp 50a4                  ; w
@0550:000701         39a3: .word a5                 ; @@ReadBy 45a4
@0551:074663               sp 50a4                  ; h
@0552:074402               sp 2a1                   ; carr. return
@0553:074663               sp 50a4                  ; y
@0554:000724         43a3: .word a6                 ; @@ReadBy a0423
@0555:074663               sp 50a4                  ; p
@0556:105444         45a3: cs 2ax                   ; @@ReadBy a1034
@0557:074663               sp 50a4                  ; q
@0560:040000         47a3: ts 0                     ; @@ReadBy a0715 a1000 a1115 a1233
@0561:074663               sp 50a4                  ; o (letter)
@0562:074402               sp 2a1                   ; stop
@0563:074663               sp 50a4                  ; b
@0564:000000         51a3: .word 0                  ; @@WrittenBy a0430 a0730 ReadBy a0433 a0731
@0565:074663               sp 50a4                  ; g
@0566:000502         53a3: .word 1a3                ; @@ReadBy 42a4
@0567:000012         54a3: .word 10                 ; 9 @@ReadBy a0421
@0570:140000         55a3: mr 0                     ; @@ReadBy 50a4 a1326
@0571:074663               sp 50a4                  ; m
@0572:074653               sp 42a4                  ; shift to u.c.
@0573:074663               sp 50a4                  ; x
@0574:150000         59a3: dv 0                     ; @@ReadBy 12a4
@0575:074663               sp 50a4                  ; v
@0576:074601               sp a4                    ; shift to l.c.
@0577:000001         62a3: .word 1                  ; 0 (zero) @@ReadBy a0660 a1055 a1214 a1224 a1237 a1246
@0600:074402               sp 2a1                   ; nullify
                           ; |
                           ; | Sheet 6/20
                           ; | a4 (Upper case symbols & misc. program)
                           ; |
                       a4:
@0601:100501          0a4: ca a3                    ; @@JumpedToBy a0576 a0676
@0602:044403          1a4: td 3a1                   ; @@JumpedToBy a0654
@0603:074402               sp 2a1                   ; E (not used)
@0604:000023               .word 19                 ; 8 (exp.)
@0605:000570          4a4: .word 55a3               ; @@ReadBy a1036
@0606:022000          5a4: .word 0.22000            ; _ ; [LAS Did say + not _ and 0,22000 but looks like hand-written sheet is as shown here now. Transcription error.] @@ReadBy a1350
@0607:000574          6a4: .word 59a3               ; A (not used) @@ReadBy a1040
@0610:000016               .word 14                 ; 3 (exp.)
@0611:074402               sp 2a1                   ; space
@0612:074402               sp 2a1                   ; . ['dot', not period] (see note)
@0613:075121               sp 40a10                 ; S
@0614:000017         11a4: .word 15                 ; 4 (exp.) @@ReadBy a0432
@0615:110574         12a4: ad 59a3                  ; I (not used) @@WrittenBy a1011 a1041 a1047 ReadBy a1007 a1011 a1045 a1047 a1176
@0616:075007               sp a9                    ; /
@0617:001025         14a4: .word 14a9               ; U (not used) @@ReadBy a1022
@0620:000015               .word 13                 ; 2 (exp.)
@0621:000000               .word 0                  ; shift ribbon ; [LAS was blank]
@0622:075212               sp a12                   ; )
@0623:075260         18a4: sp a13                   ; D (not used) @@ReadBy a1052
@0624:000020               .word 16                 ; 5 (exp.)
@0625:040000         20a4: ts 0                     ; R (not used) @@WrittenBy a1064 ReadBy a1071
@0626:000014         21a4: .word 12                 ; 1 (exp.) @@ReadBy a1126
@0627:111331         22a4: ad 41a13                 ; J (not used) @@ReadBy 14a10 a1230
@0630:000022               .word 18                 ; 7 (exp.)
@0631:105444         24a4: cs 2ax                   ; N (not used) ; [LAS was (cs 2ax/ca 2ax)] @@WrittenBy a1016 a1035 ReadBy a1016
@0632:075167               sp a11                   ; (
@0633:000000               .word 0                  ; F ; [LAS was blank]
@0634:000021               .word 17                 ; 6 (exp.)
@0635:075133               sp 50a10                 ; C
@0636:075021               sp 10a9                  ; - (exp.)
                           ; |
                           ; | note: The symbol . ['dot', not period] can be used at the programmer's discretion to
                           ; |  denote multiplication, where convenient typographically.
                           ; |
                           ; | Sheet 7/20
                           ; | a4 (continued)
@0637:050641         30a4: ta 32a4                  ; K (not used) @@JumpedToBy 52a4 55a4
@0640:075031               sp 18a9
@0641:100000         32a4: ca 0                     ; T (not used) @@WrittenBy 30a4
@0642:074775         33a4: sp 9a8                   ; @@JumpedToBy 51a4
@0643:074402               sp 2a1                   ; Z (not used)
@0644:074402               sp 2a1                   ; back space
@0645:101444         36a4: ca 2ax                   ; L (not used) @@ReadBy a1032
@0646:074402               sp 2a1                   ; tabulate
@0647:100651         38a4: ca 40a4                  ; W (not used) @@JumpedToBy 11a1 17a6 17a9
@0650:114505               su 4a3
@0651:074000         40a4: sp 0                     ; H (not used) @@WrittenBy a0405 ReadBy 38a4
@0652:074402               sp 2a1                   ; carr. return
@0653:100566         42a4: ca 53a3                  ; Y (not used) @@JumpedToBy a0572 a0672
@0654:074602               sp 1a4
@0655:074455         44a4: sp a2                    ; P ; [LAS was (sp a2/sp 2a2)] @@WrittenBy a1363 ReadBy a1363
@0656:100550         45a4: ca 39a3                  ; @@JumpedToBy a0422
@0657:044675               td 60a4                  ; Q (not used)
@0660:104577               cs 62a3
@0661:074426               sp 22a1                  ; O (letter) (not used)  ; [LAS was 23a1. Transcription error.]
@0662:074402               sp 2a1                   ; stop
@0663:110570         50a4: ad 55a3                  ; B (not used) ; [LAS was (55a3)] @@WrittenBy a1010 a1037 a1046 ReadBy a0712 a1010 a1046 a1177 a1250 JumpedToBy a0503 a0507 a0513 a0515 a0517 a0523 a0525 a0527 a0531 a0533 a0535 a0537 a0541 a0543 a0545 a0547 a0551 a0553 a0555 a0557 a0561 a0563 a0565 a0571 a0573 a0575
@0664:074642         51a4: sp 33a4                  ; ; [LAS was sp (28a10/33r) -- had it at 28a10 but seems wrong so changed it] @@WrittenBy a1101 a1106
@0665:074637         52a4: sp 30a4                  ; G (not used) @@JumpedToBy a0516
@0666:075265               sp 5a13
@0667:000024         54a4: .word 20                 ; 9 (exp.) @@ReadBy a1124
@0670:074637         55a4: sp 30a4                  ; @@JumpedToBy a0536
@0671:075272               sp 10a13                 ; M (not used)
@0672:074653               sp 42a4                  ; shift to u.c.
@0673:100542         58a4: ca 33a3                  ; X (not used) @@ReadBy a1102
@0674:044413               td 11a1                  ; ; [LAS was td 10a1.  Transcription error -- cross-out in hand-listing]
@0675:074000         60a4: sp 0                     ; V (not used) @@WrittenBy a0424 a0657
@0676:074601               sp 0a4                   ; shift to l.c.
@0677:000013         62a4: .word 11                 ; 0 (zero exp.) @@ReadBy a0425
@0700:074402               sp 2a1                   ; nullify
                           ; |
                           ; | Sheet 8/20
                           ; | a5 (Interpret MRA as lower case number)
                           ; |
                       a5:
@0701:104447               cs 39a1
@0702:040447               ts 39a1
@0703:130447          2a5: ao 39a1                  ; @@JumpedToBy a0723
@0704:070720               cp 15a5
@0705:074764               sp a8                    ; (select new address k)
@0706:044710               td 7a5
@0707:075442               sp ax                    ; (= sp 852) -| store number
@0710:040000          7a5: ts 0                     ;             | in (k, k+1) @@WrittenBy a0706 ReadBy a0714
@0711:075442               sp ax                    ;            -|
@0712:100663               ca 50a4                  ; -| form symbol mr k
@0713:044716               td 13a5                  ;  | or dv k, where
@0714:100710               ca 7a5                   ;  | k is address at
@0715:114560               su 47a3                  ;  | which number has
@0716:110000         13a5: ad 0                     ;  | just been stored @@WrittenBy a0713
@0717:074734               sp 8a6                   ; -|
@0720:075442         15a5: sp ax                    ; @@JumpedToBy a0704
@0721:150762               dv 4a7                   ; (divide by 10)
@0722:075442               sp ax
@0723:074703               sp 2a5
                           ; |
                           ; | Sheet 9/20
                           ; | a6 (Interpret MRA as exponent)
                           ; |
                       a6:
@0724:101006               ca 18a8                  ; -| store "sp exp" in
@0725:044727               td 3a6                   ;  | place of last-stored
@0726:100746               ca 18a6                  ;  | symbol (mr x or dv x)
@0727:064000          3a6: ex 0                     ; -| @@WrittenBy a0725
@0730:044564               td 51a3                  ; -|
@0731:100564               ca 51a3                  ;  | store "+x"
@0732:074775               sp 9a8                   ; -|
@0733:074747               sp 19a6                  ; -| compute and store the
@0734:074775          8a6: sp 9a8                   ; -| exponent +-n @@JumpedToBy a0476 a0717
@0735:075442          9a6: sp ax                    ; -| @@JumpedToBy a1120
@0736:100756         10a6: ca a7                    ;  | reset MRA @@ReadBy 40a1
@0737:075442               sp ax                    ;  | and various
@0740:100000               ca 0                     ;  | counters
@0741:040446         13a6: ts 38a1                  ;  | @@ReadBy a0743
@0742:040447               ts 39a1                  ;  |
@0743:100741               ca 13a6                  ;  |
@0744:044444               td 36a1                  ; -|
@0745:074647         17a6: sp 38a4                  ; ; [LAS was sp (38a4/14a9)] @@WrittenBy a1023 a1027
@0746:075277         18a6: sp 15a13                 ; "sp exp" @@ReadBy a0726
@0747:050755         19a6: ta 25a6                  ; ; [LAS was td 25a6. Transcription error.] @@JumpedToBy a0474 a0733 a1111
@0750:101446               ca 4ax                   ; -|
@0751:044754               td 24a6                  ;  | Form +-n, where
@0752:101444         22a6: ca 2ax                   ;  | n is in MRA in ; [LAS was (ca 2ax/cs 2ax)] @@WrittenBy a1017 a1033 ReadBy a1015 a1017
@0753:161017               srh 15                   ;  | (24,6) form ; [LAS was sr*]
@0754:154000         24a6: slr 0                    ; -| @@WrittenBy a0751
@0755:074000         25a6: sp 0                     ; @@WrittenBy 19a6
                           ; |
                           ; | Sheet 10/20
                           ; | a7 (Numerical storage)
                           ; |
                       a7:
@0756:000000               .word 0.00000            ; -| 0 ; [LAS added p to this section] @@ReadBy 10a6 a1261
                           ; .word 1.47777            ; -|   ; [LAS I don't see how this (lower word) is supposed to be part of float zero]
@0757:000000               .word 0.00000            ; -|
@0760:040000          2a7: .word 0.40000            ; -| 1 @@ReadBy a1263 a1270 a1275
@0761:001000               .word 0.01000            ; -|
@0762:050000          4a7: .word 0.50000            ; -| 10 @@ReadBy a0441 a0721
@0763:004000               .word 0.04000            ; -|
                           ; |
                           ; | Sheet 11/20
                           ; | a8 (Address selection)
                           ; |
                       a8:
@0764:050773               ta 7a8                   ; -| Select new @@JumpedToBy a0705 a1173
@0765:100774               ca 8a8                   ;  | address for
@0766:114526               su 21a3                  ;  | storage of
@0767:040774               ts 8a8                   ;  | numerical
@0770:115006               su 18a8                  ;  | quantity
@0771:071003               cp 15a8                  ;  |
@0772:100774               ca 8a8                   ;  |
@0773:074000          7a8: sp 0                     ;  | @@WrittenBy a0764
@0774:000305          8a8: .word 197                ; -| (last address used) ; [LAS was just "+197", no op or pseudo-op] @@WrittenBy a0767 ReadBy a0765 a0772 a1001
@0775:051005          9a8: ta 17a8                  ; -| @@JumpedToBy a0460 33a4 a0732 8a6 a1053 a1070 a1072 a1167 a1231 a1234 a1245 a1254
@0776:040040         10a8: ts comp_code             ;  | Store C(AC) in ; [LAS was ts 32. Replaced with comp_code. Note this inst gets ao'ed] @@WrittenBy a0777 ReadBy a0777 a1114
@0777:130776               ao 10a8                  ;  | next available
@1000:114560               su 47a3                  ;  | program address.
@1001:114774               su 8a8                   ;  |
@1002:071004               cp 16a8                  ;  |
@1003:054000         15a8: ck 0                     ;  | @@JumpedToBy a0771
@1004:131006         16a8: ao 18a8                  ;  | @@JumpedToBy a1002
@1005:074000         17a8: sp 0                     ;  | @@WrittenBy 9a8
@1006:000037         18a8: .word comp_code - 1      ; -| (last occupied program address) ; [LAS was "(p 31)"] [LAS was .word 31. Replaced with comp_code - 1] @@WrittenBy 16a8 ReadBy a0724 a0770 16a8
                           ; |
                           ; | Sheet 12/20
                           ; | a9 (division, etc.)
                           ; |
                       a9:
@1007:100615               ca 12a4                  ; (divide) @@JumpedToBy a0616
@1010:064663               ex 50a4
@1011:064615               ex 12a4
@1012:075014               sp 5a9
@1013:074402          4a9: sp 2a1                   ; (the 14a10 mode is never used) ; [LAS was sp (2a1/14a10)] @@WrittenBy a1361 ReadBy a1357 a1361
@1014:051020          5a9: ta 9a9                   ; @@JumpedToBy a1012 10a9 14a9 a1044
@1015:100752               ca 22a6
@1016:064631               ex 24a4
@1017:064752               ex 22a6
@1020:074000          9a9: sp 0                     ; @@WrittenBy 5a9
@1021:075014         10a9: sp 5a9                   ; (upper case minus) @@JumpedToBy a0636
@1022:100617               ca 14a4
@1023:044745               td 17a6
@1024:074402               sp 2a1
@1025:075014         14a9: sp 5a9
@1026:101030               ca 17a9
@1027:044745               td 17a6
@1030:074647         17a9: sp 38a4                  ; @@ReadBy a1026
@1031:051042         18a9: ta 27a9                  ; (reset dv and exp to normal) @@JumpedToBy a0640 28a9 12a10 a1077 36a12
@1032:100645               ca 36a4
@1033:040752               ts 22a6
@1034:100556               ca 45a3
@1035:040631               ts 24a4
@1036:100605               ca 4a4
@1037:044663               td 50a4
@1040:100607               ca 6a4
@1041:044615               td 12a4
@1042:074000         27a9: sp 0                     ; @@WrittenBy 18a9
@1043:075031         28a9: sp 18a9                  ; (reset dv and exp to non-normal) @@JumpedToBy a1222
@1044:075014               sp 5a9
@1045:100615               ca 12a4
@1046:064663               ex 50a4
@1047:064615               ex 12a4
@1050:075223               sp 9a12
                           ; |
                           ; | Sheet 13/20
                           ; | a10 (Equals, comma, SP, CP)
                           ; |
                      a10:
@1051:051062         0a10: ta 9a10                  ; @@JumpedToBy 10a10 a1172
@1052:100623               ca 18a4
@1053:074775               sp 9a8
@1054:045155         3a10: td 68a10                 ; @@WrittenBy a1170 a1240 ReadBy a1170 a1235
@1055:114577               su 62a3
@1056:041150         5a10: ts 63a10                 ; @@WrittenBy a1171 a1215 ReadBy a1171 11a11 a1212
@1057:045061               td 8a10
@1060:101062               ca 9a10
@1061:064000         8a10: ex 0                     ; @@WrittenBy a1057
@1062:074000         9a10: sp 0                     ; @@WrittenBy 0a10 ReadBy a1060
@1063:075051        10a10: sp 0a10                  ; (equals) @@JumpedToBy a0512
@1064:044625               td 20a4
@1065:075031        12a10: sp 18a9                  ; @@JumpedToBy a1210
@1066:074402               sp 2a1
@1067:100627        14a10: ca 22a4                  ; (comma) @@JumpedToBy 25a3
@1070:074775               sp 9a8
@1071:100625               ca 20a4
@1072:074775               sp 9a8
@1073:101150               ca 63a10
@1074:045076               td 21a10
@1075:101155               ca 68a10
@1076:044000        21a10: td 0                     ; @@WrittenBy a1074
@1077:075031               sp 18a9
@1100:101143        23a10: ca 58a10                 ; @@JumpedToBy a0470
@1101:044664               td 51a4
@1102:100673               ca 58a4                  ; ; [LAS was td 51a4. Transcription error.]
@1103:044414               td 12a1
@1104:074402               sp 2a1                   ; ; [LAS was sp (2a1/49r)]
@1105:101144        28a10: ca 59a10                 ; @@JumpedToBy a0456
@1106:044664               td 51a4
@1107:101145               ca 60a10
@1110:044414               td 12a1
@1111:074747               sp 19a6
@1112:111142               ad 57a10
                           ; | Sheet 14/20
                           ; | a10 (continued)
@1113:045117               td 38a10
@1114:100776               ca 10a8
@1115:114560               su 47a3
@1116:110505               ad 4a3
@1117:040000        38a10: ts 0                     ; @@WrittenBy a1113
@1120:074735               sp 9a6
@1121:101135        40a10: ca 52a10                 ; (SP) @@JumpedToBy a0613
@1122:041141        41a10: ts 56a10                 ; @@JumpedToBy a1134
@1123:015123        42a10: rd 42a10
                           ; ; 	  .print "xxxxx 3 rd %ao"
@1124:114667               su 54a4
@1125:070000               cp 0                     ; (provision for future SR, CR instructions)
@1126:114626               su 21a4
@1127:070477               cp 18a2                  ; (START)
@1130:101146               ca 61a10
@1131:044532        48a10: td 25a3                  ; @@JumpedToBy a1140
@1132:074402               sp 2a1
@1133:101142        50a10: ca 57a10                 ; (CP) @@JumpedToBy a0635
@1134:075122               sp 41a10
@1135:075373        52a10: sp a14                   ; @@ReadBy 40a10
@1136:074473        53a10: sp 14a2
@1137:101147               ca 62a10
@1140:075131               sp 48a10
@1141:075373        56a10: sp a14                   ; ; [LAS was (sp a14/cp a14)] @@WrittenBy 41a10 ReadBy a0475
@1142:071373        57a10: cp a14                   ; @@ReadBy a1112 50a10
@1143:001105        58a10: .word 28a10              ; ; [LAS added p to this section] @@ReadBy 23a10
@1144:000642        59a10: .word 33a4               ; @@ReadBy 28a10
@1145:000540        60a10: .word 31a3               ; @@ReadBy a1107
@1146:001136        61a10: .word 53a10              ; @@ReadBy a1130
@1147:001067        62a10: .word 14a10              ; @@ReadBy a1137
@1150:000000        63a10: .word 0                  ; -| storage for addresses used by @@WrittenBy 5a10 ReadBy a1073
@1151:000000               .word 0                  ;  | parenthesis routines in forming
@1152:000000               .word 0                  ;  | and storing sp orders
@1153:000000               .word 0                  ;  |
@1154:000000               .word 0                  ;  | ; [These are notated on the coding sheet as: ]
@1155:000000        68a10: .word 0                  ;  | ; [   63-67  +0                              ] @@WrittenBy 3a10 ReadBy a1075
@1156:000000               .word 0                  ;  | ; [   68-72  +0                              ]
@1157:000000               .word 0                  ;  | ; [   73-77  +0                              ]
@1160:000000               .word 0                  ;  |
@1161:000000               .word 0                  ;  |
@1162:000000        73a10: .word 0                  ;  | @@WrittenBy 5a11
@1163:000000               .word 0                  ;  |
@1164:000000               .word 0                  ;  |
@1165:000000               .word 0                  ;  |
@1166:000000               .word 0                  ; -|
                           ; |
                           ; | Sheet 15/20
                           ; | a11 (Left parenthesis)
                           ; |
                      a11:
@1167:074775               sp 9a8                   ; (store dummy symbol) @@JumpedToBy a0632
@1170:131054               ao 3a10
@1171:131056               ao 5a10
@1172:075051               sp a10
@1173:074764               sp a8
@1174:045162         5a11: td 73a10                 ; ; [LAS was "td (73a10)"] @@WrittenBy a1175 a1225 ReadBy a1175 9a12
@1175:131174               ao 5a11
@1176:100615               ca 12a4
@1177:114663               su 50a4
@1200:071202               cp 11a11
@1201:074402               sp 2a1
@1202:101056        11a11: ca 5a10                  ; @@JumpedToBy a1200
@1203:045205               td 14a11
@1204:045207               td 16a11
@1205:100000        14a11: ca 0                     ; @@WrittenBy a1203
@1206:111211               ad 18a11
@1207:040000        16a11: ts 0                     ; @@WrittenBy a1204
@1210:075065               sp 12a10
@1211:004000        18a11: .word 0.04000            ; ; [LAS added p] @@ReadBy a1206 a1220
                           ; |
                           ; | Sheet 16/20
                           ; | a12 (Right parenthesis)
                           ; |
                      a12:
@1212:101056               ca 5a10                  ; @@JumpedToBy a0622
@1213:045216               td 4a12
@1214:114577               su 62a3
@1215:045056               td 5a10
@1216:100000         4a12: ca 0                     ; @@WrittenBy a1213
@1217:045247               td 29a12
@1220:115211               su 18a11
@1221:071256               cp 36a12
@1222:075043               sp 28a9
@1223:101174         9a12: ca 5a11                  ; @@JumpedToBy a1050 a1257
@1224:114577               su 62a3
@1225:045174               td 5a11
@1226:045232               td 16a12
@1227:045252               td 32a12
@1230:100627               ca 22a4
@1231:074775               sp 9a8
@1232:100000        16a12: ca 0                     ; @@WrittenBy a1226
@1233:110560               ad 47a3
@1234:074775               sp 9a8
@1235:101054               ca 3a10
@1236:045242               td 24a12
@1237:114577               su 62a3
@1240:045054               td 3a10
@1241:045243               td 25a12
@1242:100000        24a12: ca 0                     ; @@WrittenBy a1236
@1243:064000        25a12: ex 0                     ; @@WrittenBy a1241
@1244:110505               ad 4a3
@1245:074775               sp 9a8
@1246:110577               ad 62a3
@1247:044000        29a12: td 0                     ; @@WrittenBy a1217
@1250:100663               ca 50a4
@1251:045253               td 33a12
                           ; | Sheet 17/20
                           ; | a12 (continued)
@1252:100000        32a12: ca 0                     ; @@WrittenBy a1227
@1253:110000        33a12: ad 0                     ; @@WrittenBy a1251
@1254:074775               sp 9a8
@1255:074402               sp 2a1
@1256:075031        36a12: sp 18a9                  ; @@JumpedToBy a1221
@1257:075223               sp 9a12
                           ; |
                           ; | Sheet 18/20
                           ; | a13 (Interpretive routines)
                           ; |
                      a13:
@1260:051264               ta 4a13                  ; equals @@JumpedToBy 18a4
@1261:100756               ca a7
@1262:041331               ts 41a13
@1263:100760               ca 2a7
@1264:074000         4a13: sp 0                     ; @@WrittenBy a1260
@1265:051271         5a13: ta 9a13                  ; plus @@JumpedToBy a0666
@1266:111331               ad 41a13
@1267:041331               ts 41a13
@1270:100760               ca 2a7                   ; ; [LAS was ca 207. Transcription error.]
@1271:074000         9a13: sp 0                     ; @@WrittenBy 5a13
@1272:051276        10a13: ta 14a13                 ; minus @@JumpedToBy a0671
@1273:111331               ad 41a13
@1274:041331               ts 41a13
@1275:104760               cs 2a7
@1276:074000        14a13: sp 0                     ; @@WrittenBy 10a13
@1277:051305        15a13: ta 21a13                 ; exponent @@JumpedToBy 18a6
@1300:051313               ta 27a13
@1301:075442               sp ax
@1302:131305               ao 21a13
@1303:045320               td 32a13
@1304:131320               ao 32a13
@1305:104000        21a13: cs 0                     ; @@WrittenBy 15a13 a1302 ReadBy a1302
@1306:071325               cp 37a13
@1307:041330               ts 40a13
@1310:105330               cs 40a13
@1311:041330               ts 40a13
@1312:100322               ca 210                   ; ; [LAS The notes at the end say 210 is dv 0]
@1313:110000        27a13: ad 0                     ; @@WrittenBy a1300 JumpedToBy a1327
@1314:041322               ts 34a13
@1315:131330        29a13: ao 40a13                 ; @@JumpedToBy a1324
@1316:071321               cp 33a13
@1317:075442               sp ax
@1320:074000        32a13: sp 0                     ; @@WrittenBy a1303 a1304 ReadBy a1304
@1321:075442        33a13: sp ax                    ; @@JumpedToBy a1316
@1322:140000        34a13: mr 0                     ; ; [LAS was (mr (-)/dv (-))] @@WrittenBy a1314
@1323:075442               sp ax
@1324:075315               sp 29a13
@1325:041330        37a13: ts 40a13                 ; @@JumpedToBy a1306
@1326:100570               ca 55a3
@1327:075313               sp 27a13
@1330:000000        40a13: .word 0                  ;    -|n| counter ; [LAS added p to this section] @@WrittenBy a1307 a1311 29a13 37a13 ReadBy a1310 29a13
@1331:000000        41a13: .word 0                  ; -| temporary sum storage for arithmetic @@WrittenBy a1262 a1267 a1274 ReadBy 22a4 a1266 a1273
@1332:000000               .word 0                  ; -|
                           ; |
                           ; | Sheet 19/20
                           ; | a15 (Print control)
                           ; |
                      a15:
@1333:051336               ta 3a15                  ; -| plant address of 1st @@JumpedToBy 11a16
@1334:075442         1a15: sp ax                    ; -| character to be printed @@JumpedToBy a1355
@1335:000225               si 149                   ; ; Auto-Annotate I/O: FlexoPrinter
@1336:100000         3a15: ca 0                     ; @@WrittenBy a1333 a1347 ReadBy a1347
@1337:045353               td 16a15
@1340:045343               td 8a15
@1341:071344               cp 9a15                  ; -| If next symbol is an sp order carry it out.
@1342:075442               sp ax                    ;  | Since symbols to be printed are stored as
@1343:074000         8a15: sp 0                     ; -| "mr x,mr y," etc. the "mr" actuates this xxx [?] @@WrittenBy a1340
@1344:114501         9a15: su a3                    ; -| @@JumpedToBy a1341
@1345:170012               clc 10                   ;  | form and print first letter
@1346:025346        11a15: rc 11a15                 ; -|
@1347:131336               ao 3a15
@1350:100606               ca 5a4                   ; (0.22000 - "=")
@1351:025351        14a15: rc 14a15
@1352:075442               sp ax
@1353:100000        16a15: ca 0                     ;                -| print number @@WrittenBy a1337
                           ;		  sp float_print       ; (24,6) print    |          ; [LAS Was sp 222. We don't have the original print routine]
@1354:075771               sp mfp
@1355:075334               sp 1a15                  ;   routine      -|
                           ; |
                           ; | Sheet 20/20
                           ; | a16 (used in a2)
                      a16:
@1356:051370               ta 10a16                 ; @@JumpedToBy a0455 a0467
@1357:101013               ca 4a9                   ; -| set , to sp 2a1 and reset  ; [LAS was ca 409. Transcription error.]
@1360:064532               ex 25a3                  ;  |
@1361:065013               ex 4a9                   ; -|
@1362:101372               ca 12a16                 ; -| set P to sp 2a2 (and reset)
@1363:064655               ex 44a4                  ;  |
@1364:065372               ex 12a16                 ; -|
@1365:100471               ca 12a2                  ; -| set . to sp 8a2 (and reset)
@1366:064522               ex 17a3                  ;  |
@1367:064471               ex 12a2                  ; -|
@1370:074000        10a16: sp 0                     ; @@WrittenBy a1356
@1371:075333        11a16: sp a15                   ; @@ReadBy 2a2
@1372:074457        12a16: sp 2a2                   ; ; [LAS was (sp 2a2/sp a2)] @@WrittenBy a1364 ReadBy a1362 a1364

                           ; |
                           ; | [LAS Added this section based on info below. Not clear how it can
                           ; |  possibly work using this data in the middle of the program (i.e.,
                           ; |  at 212), but it should be ok to allocate a separate space for it.]
                           ; | a14
                      a14:
@1373:000000               .word 0                  ; @@JumpedToBy 52a10 56a10 57a10
@1374:000000               .word 0
@1375:000000               .word 0
@1376:000000               .word 0
@1377:000000               .word 0
@1400:000000               .word 0
@1401:000000               .word 0
@1402:000000               .word 0
@1403:000000               .word 0
@1404:000000               .word 0
@1405:000000               .word 0

                           ; [LAS Added this section, since we don't have the original 24,6 (or 30,15) float
                           ;  printer. This is modeled after the 30,0 double-precision fixed-point
                           ;  printer found in Subroutines.pdf, OT 103.10t, pdf page 22.]

@1406:051425  float_print: ta fp_rtn
@1407:075442               sp ax                    ; Come out of spax and resume std ww operations
@1410:110000        fpbrk: ad 0                     ; Nop for setting breakpoint
                           ; Use internal op until we get "real" printer to work
                           .print "LZ output: %fm", mra
@1411:000225               si 149                   ; ; Auto-Annotate I/O: FlexoPrinter
@1412:105432               cs fp_cntr_init
@1413:041431               ts fp_cntr
                  fp_loop:
@1414:101426               ca zero_char             ; @@JumpedToBy a1421
@1415:024000               rc 0
@1416:101427               ca one_char
@1417:024000               rc 0
@1420:131431               ao fp_cntr
@1421:071414               cp fp_loop
@1422:101430               ca newline
@1423:024000               rc 0
@1424:075442               sp ax                    ; Return control to the calling spax
@1425:074000       fp_rtn: sp 0                     ; Return to caller (interpreted) @@WrittenBy float_print
@1426:174000    zero_char: .word 0o76 * 1024        ; @@ReadBy a1414
@1427:052000     one_char: .word 0o25 * 1024        ; @@ReadBy a1416
@1430:122000      newline: .word 0o51 * 1024        ; @@ReadBy a1422 a2037
@1431:000000      fp_cntr: .word 0                  ; @@WrittenBy a1413 a1420 ReadBy a1420
@1432:000012 fp_cntr_init: .word 10                 ; @@ReadBy a1412

                           ; |
                           ; | Miscellaneous [Not sure about this section needs proofing]
                           ; |
                           ; | 210 dv 0
                           ; |
                           ; | 211 = 0a14 and also "1t" in print routine. Equations are not allowed
                           ; |       0 as a number, thus 0a14 is not used in a meaningful way.
                           ; |
                           ; | 212-221 = 1a14 - 10a14: storage for sp orders to initial address of numbered equations (a
                           ; |       maximum of 10 is allowed)
                           ; |
                           ; | 222 (24,6) print routine
                           ; |
                           ; | 852 = "ax"  = (24,6) programmed arithmetic


                           ; LAS include the float-lib below, which defines ax and friends

                           ; .include "float-lib.ww"


                           ; 24,6 float format:
                           ;  hi word      lo word
                           ;  1   15       1  6      9
                           ;  s frac-hi    s exp  frac-lo

                           ;  frac is a signed 25-bit (including sign) one's-complement representation
                           ;  exp is a signed 7-bit (including sign) one's-complement representation

                           ; This first section is a test area and should not interfere with anything including the lib if there are no name conflicts.

                           ; Note we don't set .org since this file can be included in others

                           .pp do_print, 0
                           .pp main_sep_param, 1

@1433:037777          max: .word 0o037777           ; @@ReadBy a1437

@1434:051440    floathack: ta fhrtn
@1435:041441               ts ac_save
@1436:101441               ca ac_save
                           ; Original instruction, replaced by next instruction
                           ; su r17

                           ; ad 42                  ; Add in the answer

@1437:111433               ad max
@1440:074000        fhrtn: sp 0                     ; @@WrittenBy floathack
@1441:000000      ac_save: .word 0                  ; @@WrittenBy a1435 ReadBy a1436


                           ; --- Below here is the floating lib ---
                           ; -------------------------------------------------------------
                           ; DIGITAL COMPUTER LABORATORY
                           ; MASSACHUSETTS INSTITUTE OF TECHNOLOGY

                           ; Specifications of WHIRLWIND I LIBRARY SUBROUTINE Number PA 2 ,Z

                           ; Operations on Real (24,6, 0) Floating Point
                           ; Double Register Numbers (General Subroutine)

                           ; Source code contains two-letter shift ops, (sr, sl).  As far as I can tell,
                           ; the original instruction set did only "shift and round", so I've converted
                           ; them all to srr, slr.
                           ; The shift value is often preceded by a '*', which appears to mean "don't clear
                           ; the B Register".  See QTR Report #26, 1951

                           ; Preset Parameters {to be typed in program titie)

                           ; vx2/pk: k = separation in storage of two registers of number
                           ; vx/pN: N = address in storare of initial register of this subroutine

                           ; .org 852
                           ; .org 0o2000

@1442:051725           ax: ta exec_inst             ; Set address of 1st instruction to be interpreted ; from Enter @@ReadBy r06 JumpedToBy 32a1 a0443 18a2 a0707 a0711 15a5 a0722 9a6 a0737 a1301 a1317 33a13 a1323 1a15 a1342 a1352 a1407 a1424 a1772 a2041
@1443:075725               sp exec_inst

                           ; words r02, r03, and r04 represent the double precision accumulator
                      mra:
                      2ax:
@1444:000000          r02: .word 0                  ; x1  -| @@WrittenBy r58 a1560 a1566 a1613 a1633 a1653 r158 r164 a1715 ReadBy 45a3 24a4 36a4 22a6 a1465 r21 r52 r58 a1541 a1557 a1602 r109 a1630 a1636 a1651 a1676 a1705 a1713 a1775
                      3ax:
@1445:000000          r03: .word 0                  ; x1'  |- Multiple register accumulator @@WrittenBy a1462 a1470 a1555 a1604 a1612 a1615 a1627 a1635 a1656 a1674 a1703 a1717 ReadBy r15 a1470 r73 a1604 a1612 a1615 a1622 r122 a1654 a1674 a1702 a1707 r167 a1773
                      4ax:                          ;      |
@1446:000000          r04: .word 0                  ; y1  -| @@WrittenBy a1567 a1576 a1606 a1650 r177 ReadBy a0750 a1567 r86 a1573 a1606 a1644 a1647 a1722
@1447:161036          r05: srh 30                   ; "ca"                                             ; from 196r--> @@ReadBy r145
@1450:101442          r06: ca ax                    ; @@ReadBy a1547
@1451:101742          r07: ca r191                  ; "cs"                                             ; from l3r,196r @@JumpedToBy a1457
@1452:075601               sp r95
@1453:075643               sp r129                  ; "ad"                                             ; from 196r-->
@1454:000035          r10: .word 29                 ; @@ReadBy a1660
@1455:041603               ts r97                   ; "su"                                             ; from 196r-->
@1456:075640               sp r126
@1457:075451               sp r07                   ; "cm"                                             ; from 196r-->
@1460:000000          r14: .word 0                  ;  Temporary digits storage                        ; (170r) @@WrittenBy a1714 ReadBy a1720

@1461:125445          r15: sa r03                   ; -|- Add two minor products                       ; from 24r @@JumpedToBy a1472
@1462:041445               ts r03                   ; -|

@1463:100000          r17: ca 0                     ; -|- Store overflow @@ReadBy a1516 a1626
@1464:065751               ex tmp                   ; -|

@1465:145444               mh r02                   ; Form major product
@1466:075700               sp r158
@1467:141444          r21: mr r02                   ; "mr" Form two                                    ; from 49r9,196r @@JumpedToBy a1523
@1470:065445               ex r03                   ; minor products
@1471:141751               mr tmp
@1472:075461               sp r15
@1473:065751               ex tmp                   ; "dv"                                             ; from 196r-->
@1474:041603               ts r97
@1475:105610               cs r102                  ; -|
@1476:111530               ad r54                   ;  |- Form exponent of 2**-2/x2
@1477:041610               ts r102                  ; -|

@1500:105603               cs r97                   ; -|
@1501:145603               mh r97                   ;  |
@1502:065751               ex tmp                   ;  |- Form and store -(2**-2 * x2')/x2**2
@1503:161002               srh 2                    ;  |
@1504:151751               dv tmp                   ;  |
@1505:155017          r35: slh 15                   ;  | @@JumpedToBy r60
@1506:041671               ts r151                  ; -|                                               ; [LAS was transcription error ta r151]

@1507:101552               ca r72                   ; -|                                               ; [LAS this sequence does not seem to store this formula, instead stores 2**-2/x2]
@1510:151603               dv r97                   ;  |- Form and store 2**-2/x2**2
@1511:155017               slh 15                   ;  |
@1512:041751               ts tmp                   ; -|

@1513:145603               mh r97                   ; -|
@1514:115552               su r72                   ;  |
@1515:155017               slh 15                   ;  |
@1516:115463               su r17                   ;  |- Form (2**-2/x**2)' (Use Euclid's algorithm)  ; [LAS Looks like this should say (2**-2/x2)' -- Uses remainder arith, hence the Euclid ref]
                           ; sp floathack           ;                                                  ; [LAS 3/30/25 Using r17 broke dv, but looks like it works now in more cases than before. Still breaks e.g. on sqrt2 test.
                           ;                        ;                                                  ;  Can't find what changed to enable this, but we'll switch between the original and floathack as needed.
                           ;                        ;                                                  ;  The use of r17 is highly suspicious, as it's the opcode of an instruction.]
@1517:111524               ad r50                   ;  |
@1520:151603               dv r97                   ;  |
@1521:155017               slh 15                   ; -|

@1522:111671               ad r151                  ; -|- Add two minor parts of reciprocal
@1523:075467               sp r21                   ; -|

@1524:000001          r50: .word 1                  ; @@ReadBy a1517 a1625 a1632 a1665 r199
@1525:075553               sp r73                   ; "ts"
@1526:101444          r52: ca r02                   ; -|- complement x1 @@JumpedToBy a1621
@1527:075706               sp r164                  ; -|
@1530:000002          r54: .word 2                  ; @@ReadBy a1476
@1531:101754               ca r201                  ; "ta" -|                                          ; from 196r-->
@1532:044000          r56: td 0                     ;       |- Store digits in indicated address @@WrittenBy a1730
@1533:075724               sp next_inst             ;      -|

@1534:131444          r58: ao r02                   ; -|- Increase xl by by 2**-15                     ; from 119r--> @@JumpedToBy a1631
@1535:075711               sp r167                  ; -|

@1536:075505          r60: sp r35                   ; @@ReadBy a1736
@1537:075553               sp r73                   ; "ex"                                             ; from 196r-->
@1540:000077          r62: .word 63                 ; @@ReadBy a1571 a1575
@1541:105444               cs r02                   ; "cp" -|- Is x1 negative?                         ; from 196r-->
@1542:071724               cp next_inst             ;      -|                                          ; [LAS was transcription error r188]
@1543:131725               ao exec_inst             ; "sp" -|- Set Return address for sp ax            ; from 196r
@1544:045754               td r201                  ;      -|
@1545:101740               ca r189                  ; -|- Set pick up order for ordinary cp & sp       ; LAST DIGIT is a GUESS! [LAS not legible -- needed to dig into program to nail this down]
@1546:045725               td exec_inst             ; -|

@1547:115450               su r06                   ;                                                  ; PROBABLY an SU op code!

@1550:071752               cp r199                  ; -|- Test to see whether instruction is sp ax
@1551:075725               sp exec_inst             ; -|

@1552:020000          r72: .word 0.20000            ;                                                  ; [LAS ] @@ReadBy a1507 a1514

@1553:101445          r73: ca r03                   ; -|                                               ; from 51r,61r-> @@JumpedToBy a1525 a1537
@1554:160006               srr 6                    ;  |- Round off x1' and store x1' * 2**-6
@1555:041445               ts r03                   ; -|

@1556:161011               srh 9                    ; -|
@1557:125444               sa r02                   ;  |- Add round-off carry into x1
@1560:041444               ts r02                   ; -|

@1561:100000               ca 0                     ; -|
@1562:071565               cp r83                   ;  |- Is there an overflow?
@1563:114000               su 0                     ;  |
@1564:071570               cp r86                   ; -|

@1565:154016          r83: slr 14                   ; -|                                               ; from  80r-> @@JumpedToBy a1562
@1566:041444               ts r02                   ;  |- Add overflow into x1 and x1'. Increase y1
@1567:131446               ao r04                   ; -|

@1570:121446          r86: cm r04                   ; -|                                               ; from  82r-> @@JumpedToBy a1564
@1571:115540               su r62                   ;  |- |y1| - 63 > 0?
@1572:071577               cp r93                   ; -|                                               ; [LAS was transcription error sp r93]

@1573:105446               cs r04                   ; -|- y <= 0? (i.e.  y1 < -63?)
@1574:071755               cp r202                  ; -|

@1575:105540               cs r62                   ; -|- Set y1 = -63
@1576:041446               ts r04                   ; -|

@1577:101603          r93: ca r97                   ; -|- ts n + k or ex n + k                         ; from 88r-> @@JumpedToBy a1572
@1600:111750               ad sep_param             ; -|

@1601:041610          r95: ts r102                  ; Store ts, ex, ca, cs or cm n+k                   ; from 8r-> @@JumpedToBy a1452

@1602:101444               ca r02
@1603:000000          r97: .word 0                  ; -|                                               ; from (180r) @@WrittenBy a1455 a1474 a1645 a1727 ReadBy a1500 a1501 a1510 a1513 a1520 r93 a1642 r141
@1604:065445               ex r03                   ;  |
@1605:161011               srh 9                    ;  |
@1606:065446               ex r04                   ;  |
@1607:155011               slh 9                    ;  |
@1610:000000         r102: .word 0                  ;  |                                               ; (95r) @@WrittenBy a1477 r95 r129 a1655 a1666 a1741 a1744 ReadBy a1475 r129 a1655 a1666 a1721 a1744
@1611:161011               srh 9                    ;  |- Perform ts, ex, ca, cs or cm
@1612:065445               ex r03                   ;  |
@1613:041444               ts r02                   ;  |
@1614:155017               slh 15                   ;  |
@1615:065445               ex r03                   ;  |
@1616:075723         r108: sp r177                  ; -| @@ReadBy r202 a1756

@1617:121444         r109: cm r02                   ; -|                                               ;  166r-> @@JumpedToBy r166
@1620:114000               su 0                     ;  |- x1 != 0?
@1621:071526               cp r52                   ; -|

@1622:121445               cm r03                   ; -|
@1623:114000               su 0                     ;  |- x1' != 0?
@1624:071634               cp r122                  ; -|

@1625:115524               su r50                   ; -|
@1626:111463               ad r17                   ;  |- Form |x1'| - 1                               ; PROBABLY AD op code
@1627:041445               ts r03                   ; -|

@1630:101444               ca r02                   ; -|- x1 > 0?
@1631:071534               cp r58                   ; -|

@1632:115524               su r50                   ; -|- Form x1 - 2**-15
@1633:041444               ts r02                   ; -|

@1634:105445         r122: cs r03                   ; -|- Complement x1'                               ; [LAS was transcription error ca r03]             ;   114r-> @@JumpedToBy a1624
@1635:041445               ts r03                   ; -|

@1636:141444               mr r02                   ; -|- Form x1*x1'
@1637:075710               sp r166                  ; -|

@1640:105751         r126: cs tmp                   ; -|                                               ; 12r-> @@JumpedToBy a1456
@1641:041751               ts tmp                   ;  |- Complement x2, x2'
@1642:105603               cs r97                   ; -|

@1643:065610         r129: ex r102                  ; -|                                               ; r9 -> @@JumpedToBy a1453
@1644:115446               su r04                   ;  |- Form and store  y2 - yl
@1645:041603               ts r97                   ; -|

@1646:071657               cp r141                  ; y2 - y1 > 0?

@1647:111446               ad r04                   ; -|
@1650:041446               ts r04                   ;  |
@1651:101444               ca r02                   ;  |
@1652:065751               ex tmp                   ;  |- Interchange (x1, x1', y1) and (x2, x2', y2)
@1653:041444               ts r02                   ;  |
@1654:101445               ca r03                   ;  |
@1655:065610               ex r102                  ;  |
@1656:041445               ts r03                   ; -|

@1657:121603         r141: cm r97                   ; -|                                               ; 132r-> @@JumpedToBy a1646
@1660:115454               su r10                   ;  |-  |y2 - y1| - 29 > 0?
@1661:071663               cp r145                  ; -|

@1662:075724               sp next_inst             ; No need for addition

@1663:111447         r145: ad r05                   ; -|- Store  sr *1 +|y2 - y1|                      ; 143r-> @@JumpedToBy a1661
@1664:041671               ts r151                  ; -|

@1665:101524               ca r50                   ; -|- Set y2 = l
@1666:065610               ex r102                  ; -|

@1667:161017               srh 15                   ; -|
@1670:111751               ad tmp                   ;  |
@1671:000000         r151: .word 0                  ;  |- Form and store                               ; (146r) @@WrittenBy a1506 a1664 ReadBy a1522
@1672:041751               ts tmp                   ;  |  (x2 + x2' * 2**-15) * 2**(-1 - |y2 - y1|)
@1673:155017               slh 15                   ;  |
@1674:065445               ex r03                   ; -|

@1675:161017               srh 15                   ; -|
@1676:111444               ad r02                   ;  |-    Form (x1 + x1' * 2**-15) * 2**-l
@1677:161001               srh 1                    ; -|

@1700:041444         r158: ts r02                   ; Store x1                                         ;  20r-> @@JumpedToBy a1466

@1701:155017               slh 15                   ; -|
@1702:125445               sa r03                   ;  |                                               ; [LAS was transcription error ts r03]
@1703:041445               ts r03                   ;  |- Add x1, x1' and x2, x2'
@1704:101751               ca tmp                   ;  |
@1705:111444               ad r02                   ;  |
@1706:041444         r164: ts r02                   ; -|                                               ; 53r-> @@JumpedToBy a1527

@1707:141445               mr r03                   ; Does sign x1 = sign x1'?
@1710:071617         r166: cp r109                  ;                                                  ;  125r-> @@JumpedToBy a1637

@1711:101445         r167: ca r03                   ; -|                                               ; 59r-> @@JumpedToBy a1535
@1712:161017               srh 15                   ;  |
@1713:111444               ad r02                   ;  |
@1714:165460               sf r14                   ;  |- Scale factor and store x1, x1'
@1715:041444               ts r02                   ;  |                                               ; [LAS was transcription error ta r02]
@1716:155017               slh 15                   ;  |
@1717:041445               ts r03                   ; -|                                               ; [LAS was transcription error ta r03]

@1720:105460               cs r14                   ; -|
@1721:111610               ad r102                  ;  |- Form exponent
@1722:111446               ad r04                   ;  |
@1723:041446         r177: ts r04                   ; -|                                               ; 108r-> @@JumpedToBy r108

@1724:131725    next_inst: ao exec_inst             ; increase address                                 ; [LAS was transcription error ao r197] @@JumpedToBy a1533 a1542 a1662
@1725:100000    exec_inst: ca 0                     ; Pick up next instruction @@WrittenBy ax a1543 a1546 next_inst ReadBy a1543 next_inst JumpedToBy a1443 a1551 a1753
@1726:075757               sp halt_if_zero
@1727:041603               ts r97                   ; -|
@1730:045532               td r56                   ;  |
@1731:045740               td r189                  ;  |- Store instruction and digits
@1732:111750               ad sep_param             ;  |
@1733:045742               td r191                  ; -|

@1734:161033               srh 27                   ; -|
@1735:155021               slh 17                   ;  |- Form sp to address for particular instruction
@1736:111536               ad r60                   ;  |
@1737:041747         r188: ts dispatch              ; -|
@1740:100000         r189: ca 0                     ; -|                                               ; (182r) @@WrittenBy a1731 ReadBy a1545
@1741:041610               ts r102                  ;  |
@1742:100000         r191: ca 0                     ;  |                                               ; (181r) @@WrittenBy a1733 ReadBy r07
@1743:161011               srh 9                    ;  |- Pick up x2, x2' and y2. Store x2 in reg. 198, y2 in reg 102. Hold x2' in AC
@1744:065610               ex r102                  ;  |
@1745:041751               ts tmp                   ;  |
@1746:155017               slh 15                   ; -|
                           ;            .if do_print  .print "3 dis='%i' tmp=x2=%o r102=y2=%o AC=x2'=0o%ao r02=x1=%o r03=x1'=%o r04=y1=%o", dispatch, tmp, r102, r02, r03, r04
@1747:000000     dispatch: .word 0                  ; Go to part of I.S. for particular instruction    ; (188r) @@WrittenBy r188
                     r197:
@1750:000001    sep_param: .word main_sep_param     ; Separation parameter                             ; [LAS There is a note in Subroutines.pdf pdf-page 25 that says r197 is "pax2" @@ReadBy a1600 a1732
                     r198:
@1751:000000          tmp: .word 0                  ; Temporary storage @@WrittenBy a1464 a1473 a1502 a1512 a1641 a1652 a1672 a1745 ReadBy a1464 a1471 a1473 a1502 a1504 r126 a1652 a1670 a1704

@1752:111524         r199: ad r50                   ;                                                  ; from 70r--> @@JumpedToBy a1550
@1753:071725               cp exec_inst             ; Does address equal ax?
@1754:074000         r201: sp 0                     ; Return to register following sp ax               ; (66r) @@WrittenBy a1544 ReadBy a1531

@1755:101616         r202: ca r108                  ; -|- Produce overflow alarm                       ; from 90r @@JumpedToBy a1574
@1756:111616               ad r108                  ; -|

                           ; [LAS Added this section, which halts the machine if it encounters an
                           ;  si 0 (i.e., a zero instruction). This came up in L&Z, where the
                           ;  compiled code, which is then spax-interpreted, does not have a
                           ;  clean termination. So it runs into the zero at the end and
                           ;  crashes. Seems to be a hole in the design of L&Z or the float lib
                           ;  or both, where termination conditions aren't clear. Perhaps some of
                           ;  the illegible hand-written notes address it.]

@1757:051767 halt_if_zero: ta hiz_rtn               ; @@JumpedToBy a1726
@1760:041770               ts hiz_ac
@1761:121770               cm hiz_ac                ; Nice zero-checking idiom from the frac printer. Ah, one's-complement!
@1762:114000               su 0
@1763:071765               cp hiz1
@1764:075766               sp hiz2
@1765:000000         hiz1: si 0                     ; After all that, we interpret an si 0 as an si 0 ; Auto-Annotate I/O: unknown i/o device@@JumpedToBy a1763
@1766:101770         hiz2: ca hiz_ac                ; @@JumpedToBy a1764
@1767:074000      hiz_rtn: sp 0                     ; @@WrittenBy halt_if_zero
@1770:000000       hiz_ac: .word 0                  ; @@WrittenBy a1760 ReadBy a1761 hiz2


                           ; end .include "float-lib.ww"

                           ; LAS include current version of printer. Right now this just prints
                           ; the fractional part of a 30,15 float.

                           ; .include "modern-frac-30-0-0-print.ww"

                           ; LAS 4/13/25 This file is adapted from frac-30-0-0-print.ww, but
                           ;    altered enough that we can't call it the same routine
                           ;    anymore. One basic change is replacement of the qp instruction
                           ;    with si/rc instructions for the flexowriter, and also replacement
                           ;    of the code table with flex codes. It's not known yet what codes
                           ;    were used by the device on the receiving end of the qp.  Since
                           ;    we're essentially creating a new routine, much of the the doc
                           ;    included with the orginal has been omitted from the description below.

                           ; |   Description
                           ; |
                           ; |       This subroutine prints and/or punches the sign and magnitude of the
                           ; |   contents of the MRA in the following manner
                           ; |
                           ; |            +-.d1d2...dn
                           ; |
                           ; |   The number, n, of decimal digits to be printed is a preset parameter (v2). The
                           ; |   digits, di, are obtained by multiplying the magnitude of the contents of the MRA
                           ; |   successively by p10.
                           ; |
                           ; |   This subroutine contains a sign agreement program so that the contents
                           ; |   of the MRA need not be a number whose major and minor parts are of like sign.
                           ; |
                           ; |   The sp instruction transferring control to this subroutine must be an
                           ; |   interpreted sp (i.e., control must be in the interpretive subroutine). After
                           ; |   execution of the subroutine control remains in the interpretive subroutine which
                           ; |   then proceeds to interpret the instruction following the sp instruction in
                           ; |   storage.
                           ; |
                           ; |   There is no carriage return.
                           ; |
                           ; |   This subroutine can be used with any(30,0,0) interpretive subroutine.
                           ; |   The contents of the MRA are left undisturbed during the execution of this
                           ; |   subroutine.
                           ; |
                           ; |   Abstract: This subroutine prints out a +- sign and a decimal point followed
                           ; |             by the magnitude of the contents of the MRA as a decimal fraction.
                           ; |             The decimal digits are obtained by multiplying the contents of the
                           ; |             MRA successively by plO. The number of digits to be printed is
                           ; |             a preset parameter (v2). There is no carriage return. The sub-
                           ; |             routine is interpreted and can be used with any (30,0,0) inter-—
                           ; |             pretive subroutine.
                           ; |
                           ; |   Temporary Storage
                           ; |       d       unused
                           ; |       1tmfp   -|
                           ; |       2tmfp    |- Temporary storage
                           ; |       3tmfp   -|
                           ; |       4tmfp      Digit counter
                           ; |
                           ; |

                      mfp:                          ; mfp == modern frac print
@1771:052042               ta 37mfp                 ; @@JumpedToBy a1354
@1772:075442               sp ax                    ; Resume ordinary ww operation
                           .print "LZ output: %fm", mra
@1773:101445               ca 3ax                   ; -|
@1774:042113               ts 2tmfp                 ;  |- Store C(mra) in 1tmfp and 2tmfp
@1775:101444               ca 2ax                   ;  |
@1776:042112         5mfp: ts 1tmfp                 ; -| @@JumpedToBy a2067
@1777:142113         6mfp: mr 2tmfp                 ; Do 1tmfp and 2tmfp agree in sign? @@JumpedToBy a2063
@2000:072043               cp 38mfp
@2001:102112               ca 1tmfp                 ; -|
@2002:072005         9mfp: cp 12mfp                 ;  | @@JumpedToBy a2065
@2003:102107               ca plus_char             ;  |
@2004:076006               sp 13mfp                 ;  |- Sense and print algebraic sign of C(mra) followed by a decimal point
@2005:102110        12mfp: ca minus_char            ;  | @@JumpedToBy 9mfp
@2006:000225        13mfp: si 149                   ;  | ; Auto-Annotate I/O: FlexoPrinter@@JumpedToBy a2004
@2007:024000               rc 0                     ;  |
@2010:102111               ca dot_char              ;  |
@2011:024000               rc 0                     ; -|

@2012:106072               cs ndigits               ; -|- Set up digit counter
@2013:042115               ts digit_cntr            ; -|

@2014:122112        17mfp: cm 1tmfp                 ; -| @@JumpedToBy a2036
@2015:146073               mh 62mfp                 ;  |
@2016:042114               ts 3tmfp                 ;  |
@2017:154017               slr 15                   ;  |
@2020:042112               ts 1tmfp                 ;  |- Multiply C(1tmfp,2tmfp) by p10
@2021:122113               cm 2tmfp                 ;  |
@2022:146073               mh 62mfp                 ;  |
@2023:042113               ts 2tmfp                 ;  |
@2024:154017               slr 15                   ;  |
@2025:066113               ex 2tmfp                 ;  |
@2026:126112               sa 1tmfp                 ;  |
@2027:042112               ts 1tmfp                 ; -|

@2030:102114               ca 3tmfp                 ; -|
@2031:112074               ad 63mfp                 ;  |- Set up entry into table
@2032:046033               td 32mfp                 ; -|

                    32mfp:
@2033:100000               ca 0                     ; -|- Print a single digit @@WrittenBy a2032
@2034:024000               rc 0                     ; -|

@2035:132115               ao digit_cntr            ; -|- Have enough digits been printed?
@2036:072014               cp 17mfp                 ; -|

@2037:101430               ca newline               ;; LAS The description says no cr, but there does not seem to be one emitted at any level
@2040:024000               rc 0

@2041:075442               sp ax                    ; -|- Return control to int. subroutine
@2042:074000        37mfp: sp 0                     ; -| @@WrittenBy a1771

@2043:122112        38mfp: cm 1tmfp                 ; -| @@JumpedToBy a2000
@2044:114000               su 0                     ;  |- Is C(1tmfp) != 0?
@2045:072066               cp 57mfp                 ; -|

@2046:122113               cm 2tmfp                 ; -|
@2047:114000               su 0                     ;  |- Is C(2tmfp) != 0?
@2050:072060               cp 51mfp                 ; -|

@2051:116071               su 60mfp                 ; -|
@2052:112070               ad 59mfp                 ;  |- Form 1 - |C(2tmfp)|
@2053:042113               ts 2tmfp                 ; -|

@2054:102112               ca 1tmfp                 ; -|- Is C(1tmfp) pos.?
@2055:072064               cp 55mfp                 ; -|

@2056:116071               su 60mfp                 ; -|- Form C(1tmfp) - 2^-15
@2057:042112               ts 1tmfp                 ; -|

@2060:106113        51mfp: cs 2tmfp                 ; -|- Complement C(2tmfp) @@JumpedToBy a2050
@2061:042113               ts 2tmfp                 ; -|

@2062:102112               ca 1tmfp                 ; -|- Re-enter sign agreement
@2063:075777               sp 6mfp                  ; -|

@2064:132112        55mfp: ao 1tmfp                 ; @@JumpedToBy a2055
@2065:076002               sp 9mfp
@2066:106112        57mfp: cs 1tmfp                 ; @@JumpedToBy a2045
@2067:075776               sp 5mfp
@2070:100000        59mfp: ca 0                     ;                                                  ; [59-73 are notated in Subroutines.pdf with no spaces, e.g., ca0, p1] @@ReadBy a2052
@2071:000001        60mfp: .word 1                  ; @@ReadBy a2051 a2056
                  ndigits:
@2072:000012        61mfp: .word 10                 ; v2                                               ; [was just n1a2 -- need to track down this notation] @@ReadBy a2012
@2073:000012        62mfp: .word 10                 ; @@ReadBy a2015 a2022
@2074:002075        63mfp: .word 64mfp              ; ,                                                ; [I think comma? Might just be a blemish] @@ReadBy a2031
@2075:174000        64mfp: .flexh "0123456789"      ; Digit table
@2076:052000
@2077:036000
@2100:016000
@2101:026000
@2102:046000
@2103:066000
@2104:056000
@2105:006000
@2106:154000
                plus_char:
@2107:032000        74mfp: .flexh "+"               ; @@ReadBy a2003
               minus_char:
@2110:072000        75mfp: .flexh "-"               ; @@ReadBy 12mfp
@2111:042000     dot_char: .flexh "."               ; @@ReadBy a2010

@2112:000000        1tmfp: .word 0                  ; @@WrittenBy 5mfp a2020 a2027 a2057 55mfp ReadBy a2001 17mfp a2026 38mfp a2054 a2062 55mfp 57mfp
@2113:000000        2tmfp: .word 0                  ; @@WrittenBy a1774 a2023 a2025 a2053 a2061 ReadBy 6mfp a2021 a2025 a2046 51mfp
@2114:000000        3tmfp: .word 0                  ; @@WrittenBy a2016 ReadBy a2030
               digit_cntr:
@2115:000000        4tmfp: .word 0                  ; @@WrittenBy a2013 a2035 ReadBy a2035
@2116:162000       upcase: .word 0o71 * 1024
@2117:172000       dncase: .word 0o75 * 1024
                           ; end .include "modern-frac-30-0-0-print.ww"
